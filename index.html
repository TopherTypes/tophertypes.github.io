<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Meeting Notes</title>
  <link rel="stylesheet" href="app.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar__left">
      <div class="brand">
        <div class="brand__title">Meeting Notes</div>
        <div class="brand__subtitle">Offline-first • Drive sync • Per-person updates</div>
      </div>
    </div>

    <div class="topbar__right">
      <div class="statuspill" id="net_status">Checking network…</div>
      <div class="statuspill" id="sync_status">Local only</div>

      <button class="btn" id="auth_btn">Sign in</button>
      <button class="btn btn--ghost" id="signout_btn">Sign out</button>

      <button class="btn btn--primary" id="sync_btn">Sync</button>
    </div>
  </header>

  <main class="layout">
    <nav class="tabs">
      <button class="tab is-active" data-tab="meeting">Meeting</button>
      <button class="tab" data-tab="updates">Updates</button>
      <button class="tab" data-tab="actions">My Actions</button>
      <button class="tab" data-tab="topics">Topics</button>
      <button class="tab" data-tab="search">Search</button>
      <button class="tab" data-tab="settings">Settings</button>
    </nav>

    <section class="panel is-active" id="tab_meeting">
      <div class="grid2">
        <div class="card">
          <h2>Create / Open meeting</h2>

          <div class="formrow">
            <label>Template</label>
            <select id="meeting_template"></select>
          </div>

          <div class="formrow">
            <label>Topic / Project</label>
            <div class="row">
              <select id="meeting_topic"></select>
              <button class="btn btn--ghost" id="add_topic_btn">+ Topic</button>
            </div>
          </div>

          <div class="formrow">
            <label>Meeting title (optional)</label>
            <input id="meeting_title" type="text" placeholder="e.g., Weekly catch-up" />
          </div>

          <div class="formrow">
            <label>Date/time</label>
            <input id="meeting_datetime" type="datetime-local" />
          </div>

          <div class="row row--space">
            <button class="btn btn--primary" id="create_meeting_btn">Create meeting</button>
            <button class="btn" id="open_meeting_btn">Open existing…</button>
          </div>

          <hr />

          <div class="formrow">
            <label>Current meeting</label>
            <div class="muted" id="current_meeting_label">None selected.</div>
          </div>

          <div class="row row--space">
            <button class="btn" id="download_meeting_summary_btn">Copy meeting summary</button>
            <button class="btn btn--ghost" id="delete_meeting_btn">Delete meeting</button>
          </div>
        </div>

        <div class="card">
          <h2>Quick lookup</h2>
          <div class="formrow">
            <label>Search past notes</label>
            <input id="quick_search" type="text" placeholder="Type to search…" />
          </div>
          <div id="quick_search_results" class="list"></div>
        </div>
      </div>

      <div class="card" id="meeting_work_area">
        <h2>Meeting notes</h2>
        <div class="muted">Create or open a meeting to start taking notes.</div>
      </div>
    </section>

    <section class="panel" id="tab_updates">
      <div class="card">
        <h2>Updates by person</h2>

        <div class="grid2">
          <div>
            <div class="formrow">
              <label>Person</label>
              <select id="updates_person"></select>
            </div>

            <div class="row row--space">
              <button class="btn btn--primary" id="mark_updates_btn">Mark all shown as updated</button>
              <button class="btn" id="copy_updates_btn">Copy updates text</button>
            </div>

            <p class="muted">
              This marks updates only for the selected person — if an item also targets other people,
              it stays pending for them.
            </p>
          </div>

          <div>
            <div class="formrow">
              <label>Filter</label>
              <input id="updates_filter" type="text" placeholder="Filter pending updates…" />
            </div>
            <div class="muted" id="updates_count"></div>
          </div>
        </div>

        <div id="updates_list" class="list"></div>
      </div>
    </section>

    <section class="panel" id="tab_actions">
      <div class="card">
        <h2>My Actions</h2>

        <div class="filters">
          <div class="formrow">
            <label>Owner</label>
            <select id="actions_owner"></select>
          </div>

          <div class="formrow">
            <label>Topic</label>
            <select id="actions_topic"></select>
          </div>

          <div class="formrow">
            <label>Status</label>
            <select id="actions_status">
              <option value="">Any status</option>
              <option value="open">Open</option>
              <option value="in_progress">In progress</option>
              <option value="blocked">Blocked</option>
              <option value="done">Done</option>
            </select>
          </div>
        </div>

        <div class="muted" id="actions_count"></div>
        <div id="actions_list" class="list"></div>
      </div>
    </section>

    <section class="panel" id="tab_topics">
      <div class="card">
        <h2>Topic overview</h2>

        <div class="grid2">
          <div class="formrow">
            <label>Topic</label>
            <select id="topics_topic"></select>
          </div>

          <div class="formrow">
            <label>Focus</label>
            <select id="topics_focus">
              <option value="overview">Overview</option>
              <option value="actions">Open actions</option>
              <option value="decisions">Decisions</option>
              <option value="questions">Questions</option>
              <option value="info">Information</option>
            </select>
          </div>
        </div>

        <div id="topic_output" class="list"></div>
      </div>
    </section>

    <section class="panel" id="tab_search">
      <div class="card">
        <h2>Search everything</h2>
        <div class="grid2">
          <div class="formrow">
            <label>Search</label>
            <input id="search_query" type="text" placeholder="e.g., 'supplier', 'decision', 'Afonso'…" />
          </div>
          <div class="formrow">
            <label>Type</label>
            <select id="search_type">
              <option value="all">All</option>
              <option value="info">Info</option>
              <option value="question">Question</option>
              <option value="decision">Decision</option>
              <option value="action">Action</option>
            </select>
          </div>
        </div>
        <div id="search_results" class="list"></div>
      </div>
    </section>

    <section class="panel" id="tab_settings">
      <div class="grid2">
        <div class="card">
          <h2>People</h2>
          <div class="row">
            <input id="new_person_name" type="text" placeholder="Add a person…" />
            <button class="btn btn--primary" id="add_person_btn">Add</button>
          </div>
          <div id="people_list" class="list"></div>
        </div>

        <div class="card">
          <h2>Groups</h2>
          <div class="row">
            <input id="new_group_name" type="text" placeholder="Add a group…" />
            <button class="btn btn--primary" id="add_group_btn">Add</button>
          </div>
          <div class="muted">Groups expand to people at the time you tag an item.</div>
          <div id="groups_list" class="list"></div>
        </div>
      </div>

      <div class="grid2">
        <div class="card">
          <h2>Defaults</h2>
          <div class="formrow">
            <label>Default owner name</label>
            <input id="default_owner_name" type="text" placeholder="e.g., Taylor" />
          </div>
          <div class="muted">Matches an existing person name for the Actions default filter.</div>
        </div>
      </div>

      <div class="grid2">
        <div class="card">
          <h2>Backup</h2>
          <div class="row row--space">
            <button class="btn" id="download_json_btn">Download JSON backup</button>
            <label class="btn btn--ghost" for="import_json_file">Import JSON</label>
            <input id="import_json_file" type="file" accept="application/json" style="display:none" />
          </div>
          <p class="muted">
            Import merges into your local data. You can then Sync to Drive if you want.
          </p>
        </div>

        <div class="card">
          <h2>Templates</h2>
          <div class="muted">This version ships with Standard + 1:1 templates. We can add more later.</div>
          <div id="templates_list" class="list"></div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="muted">
      Tip: Use it offline freely. When you’re online, hit <strong>Sync</strong>. The Drive file is stored hidden in your account.
    </div>
  </footer>

  <script src="app.js"></script>

  <!-- Google API client library -->
  <script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
  <!-- Google Identity Services -->
  <script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>
</body>
</html>
